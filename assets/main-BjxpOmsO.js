const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-DwyrphCf.js","./InlineLoader-C7WlMchm.js","./ton-vendor-hTmWgCDw.js","./InlineLoader-BUZAcgir.css","./monaco-editor-core-BNZEfIW9.js","./monaco-editor-core-GL-q52Lm.css","./index-INGO7O_s.js","./ton-assembly-test-dev-GzvYfkSs.js","./index-CW3wO_9q.css","./index-DjWaDtFX.js","./index-C25LcDTn.css"])))=>i.map(i=>d[i]);
import{j as e,r as h,h as Fe,R as z,i as Ae,k as We,B as Y,l as de,c as ue,m as Pe,d as te,u as Oe,n as qe,o as ze,p as Ge,I as P,F as Ke,q as Ue,a as Je,G as Ze,T as Ye,H as Xe,P as Qe}from"./InlineLoader-C7WlMchm.js";import{_ as me}from"./monaco-editor-core-BNZEfIW9.js";import{C as et,S as q,a as tt,u as at,n as ae,t as st,T as nt}from"./useTraceStepper-CUl9BBSp.js";import{f as D,a as y,b as V,c as U,s as se}from"./index-S1Q8XQYG.js";import"./ton-vendor-hTmWgCDw.js";import"./index-INGO7O_s.js";import"./ton-assembly-test-dev-GzvYfkSs.js";import"./ton-sandbox-CuTPuVqq.js";import"./index-CQ9_rxVT.js";const ot="_addressValue_pwqhv_1",it="_copyIcon_pwqhv_26",ne={addressValue:ot,copyIcon:it},R=({address:t,className:n})=>{const o=`${ne.addressValue} ${n??""}`.trim();return e.jsxs("span",{className:o,title:t,children:[t,e.jsx(et,{className:ne.copyIcon,title:"Copy address",value:t})]})},lt="_transactionDetailsContainer_9whhp_1",rt="_detailRow_9whhp_23",ct="_detailLabel_9whhp_47",dt="_detailValue_9whhp_62",ut="_detailValueFull_9whhp_71 _detailValue_9whhp_62",mt="_gasValue_9whhp_83",ht="_currencyValue_9whhp_88",xt="_timestampValue_9whhp_98",_t="_timestampDetailSecondary_9whhp_102",pt="_numberValue_9whhp_106",Ct="_booleanTrue_9whhp_109",jt="_booleanFalse_9whhp_114",vt="_hashValue_9whhp_119",yt="_multiColumnRow_9whhp_144",Nt="_multiColumnItem_9whhp_151",gt="_multiColumnItemTitle_9whhp_168",wt="_multiColumnItemValue_9whhp_175",ft="_labeledSectionRow_9whhp_181",bt="_labeledSectionTitle_9whhp_189",It="_labeledSectionContent_9whhp_204",s={transactionDetailsContainer:lt,detailRow:rt,detailLabel:ct,detailValue:dt,detailValueFull:ut,gasValue:mt,currencyValue:ht,timestampValue:xt,timestampDetailSecondary:_t,numberValue:pt,booleanTrue:Ct,booleanFalse:jt,hashValue:vt,multiColumnRow:yt,multiColumnItem:Nt,multiColumnItemTitle:gt,multiColumnItemValue:wt,labeledSectionRow:ft,labeledSectionTitle:bt,labeledSectionContent:It},oe=t=>{if(t===void 0)return"—";const n=typeof t=="string"?new Date(t):new Date(t*1e3),o=$=>$.toString().padStart(2,"0"),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=n.getDate(),x=n.getMonth(),l=x+1,d=n.getFullYear(),u=n.getHours(),f=n.getMinutes(),N=n.getSeconds(),g=`${o(i)}.${o(l)}.${d}, ${o(u)}:${o(f)}:${o(N)}`,j=`${o(i)} ${r[x]}, ${o(u)}:${o(f)}`;return e.jsxs(e.Fragment,{children:[g,e.jsxs("span",{className:s.timestampDetailSecondary,children:[" — ",j]})]})},St=({result:t})=>{const n=l=>e.jsx("span",{className:l?s.booleanTrue:s.booleanFalse,children:l?"Yes":"No"}),o=t.emulatedTx,r=t.money,i=o.computeInfo!=="skipped"&&o.computeInfo.success,x=i?"success":"failed";return e.jsxs("div",{className:s.transactionDetailsContainer,children:[e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Status"}),e.jsx("div",{className:s.detailValue,children:e.jsx(q,{type:x})})]}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Account"}),e.jsx("div",{className:s.detailValue,children:e.jsx(R,{address:D(t.inMsg.contract)})})]}),t.inMsg.sender&&e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Sender"}),e.jsx("div",{className:s.detailValue,children:e.jsx(R,{address:D(t.inMsg.sender)})})]}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Time"}),e.jsx("div",{className:`${s.detailValue} ${s.timestampValue}`,children:oe(o.utime)})]}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"LT"}),e.jsx("div",{className:`${s.detailValue} ${s.numberValue}`,children:String(o.lt)})]}),t.inMsg.amount&&e.jsxs("div",{className:s.detailRow,children:[e.jsx("div",{className:s.detailLabel,children:"Amount In"}),e.jsx("div",{className:`${s.detailValue} ${s.currencyValue}`,children:y(t.inMsg.amount)})]}),e.jsxs("div",{className:s.labeledSectionRow,children:[e.jsx("div",{className:s.labeledSectionTitle,children:"Fees & Balance"}),e.jsx("div",{className:s.labeledSectionContent,children:e.jsxs("div",{className:s.multiColumnRow,children:[e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Balance before"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.currencyValue}`,children:y(r.balanceBefore)})]}),e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Amount Sent (Total)"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.currencyValue}`,children:y(r.sentTotal)})]}),e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Total Fee"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.currencyValue}`,children:y(r.totalFees)})]}),e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Gas Fee"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.gasValue} ${s.currencyValue}`,children:o.computeInfo!=="skipped"?y(o.computeInfo.gasFees):"N/A"})]}),e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Balance after"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.currencyValue}`,children:y(r.balanceAfter)})]})]})})]}),e.jsxs("div",{className:s.labeledSectionRow,children:[e.jsx("div",{className:s.labeledSectionTitle,children:"Compute Phase"}),e.jsx("div",{className:s.labeledSectionContent,children:o.computeInfo==="skipped"?e.jsx("div",{className:s.detailValueFull,children:"Skipped"}):e.jsxs("div",{className:s.multiColumnRow,children:[e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Success"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${o.computeInfo.success?s.booleanTrue:s.booleanFalse}`,children:n(o.computeInfo.success)})]}),e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Exit code"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.numberValue}`,children:V(o.computeInfo.exitCode)})]}),e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"VM steps"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.numberValue}`,children:V(o.computeInfo.vmSteps)})]}),e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Gas used"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.gasValue}`,children:V(o.computeInfo.gasUsed)})]}),e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Gas fees"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.gasValue} ${s.currencyValue}`,children:y(o.computeInfo.gasFees)})]})]})})]}),e.jsxs("div",{className:s.labeledSectionRow,children:[e.jsx("div",{className:s.labeledSectionTitle,children:"Action Phase"}),e.jsx("div",{className:s.labeledSectionContent,children:e.jsxs("div",{className:s.multiColumnRow,children:[e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Success"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${i?s.booleanTrue:s.booleanFalse}`,children:n(i)})]}),e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Total actions"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.numberValue}`,children:V(o.actions.length)})]})]})})]}),t.emulatorVersion&&e.jsxs("div",{className:s.labeledSectionRow,children:[e.jsx("div",{className:s.labeledSectionTitle,children:"Meta"}),e.jsx("div",{className:s.labeledSectionContent,children:e.jsxs("div",{className:s.multiColumnRow,children:[e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Emulator Version"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.hashValue}`,children:t.emulatorVersion.commitHash.substring(0,7)})]}),e.jsxs("div",{className:s.multiColumnItem,children:[e.jsx("div",{className:s.multiColumnItemTitle,children:"Emulator Date"}),e.jsx("div",{className:`${s.multiColumnItemValue} ${s.timestampValue}`,children:oe(t.emulatorVersion?.commitDate)})]})]})})]})]})},kt=t=>{switch(t.type){case"sendMsg":{const n=t.outMsg,o=n.info.type==="internal"?"Internal":"External",r=n.info.type==="internal"||n.info.type==="external-out"?n.info.dest:"unknown",i=typeof r=="string"?r:D(r),x=n.info.type==="internal"?y(n.info.value.coins):"";return{title:"Send Message",icon:"send-icon",description:`${o} → ${i}`,value:x}}case"setCode":return{title:"Set Code",icon:"code-icon",description:"Update contract code",value:""};case"reserve":return{title:"Reserve",icon:"reserve-icon",description:`Mode: ${t.mode}`,value:y(t.currency.coins)};default:return{title:"Unknown",icon:"unknown-icon",description:`Type: ${t.type}`,value:""}}},Lt="_noActions_10i5u_1",Tt="_actionsHorizontalList_10i5u_7",Vt="_actionSendMsg_10i5u_49 _actionCardBase_10i5u_30",Mt="_actionSetCode_10i5u_53 _actionCardBase_10i5u_30",Rt="_actionReserve_10i5u_57 _actionCardBase_10i5u_30",$t="_actionChangeLibrary_10i5u_61 _actionCardBase_10i5u_30",Ht="_actionUnknown_10i5u_65 _actionCardBase_10i5u_30",Bt="_actionCardIconSendMsg_10i5u_80 _actionCardIcon_10i5u_69",Dt="_actionCardIconSetCode_10i5u_84 _actionCardIcon_10i5u_69",Et="_actionCardIconReserve_10i5u_88 _actionCardIcon_10i5u_69",Ft="_actionCardIconChangeLibrary_10i5u_92 _actionCardIcon_10i5u_69",At="_actionCardIconUnknown_10i5u_96 _actionCardIcon_10i5u_69",Wt="_actionCardContent_10i5u_101",Pt="_actionCardTitle_10i5u_108",Ot="_actionCardDescription_10i5u_115",qt="_actionCardValue_10i5u_123",zt="_actionCardView_10i5u_130",Gt="_viewActionBtn_10i5u_137",p={noActions:Lt,actionsHorizontalList:Tt,actionSendMsg:Vt,actionSetCode:Mt,actionReserve:Rt,actionChangeLibrary:$t,actionUnknown:Ht,actionCardIconSendMsg:Bt,actionCardIconSetCode:Dt,actionCardIconReserve:Et,actionCardIconChangeLibrary:Ft,actionCardIconUnknown:At,actionCardContent:Wt,actionCardTitle:Pt,actionCardDescription:Ot,actionCardValue:qt,actionCardView:zt,viewActionBtn:Gt},Kt=t=>{switch(t){case"sendMsg":return p.actionCardIconSendMsg;case"setCode":return p.actionCardIconSetCode;case"reserve":return p.actionCardIconReserve;case"changeLibrary":return p.actionCardIconChangeLibrary;default:return p.actionCardIconUnknown}},Ut=t=>{switch(t){case"sendMsg":return p.actionSendMsg;case"setCode":return p.actionSetCode;case"reserve":return p.actionReserve;case"changeLibrary":return p.actionChangeLibrary;default:return p.actionUnknown}},Jt=({actions:t,onSelect:n})=>t.length===0?e.jsx("p",{className:p.noActions,children:"No out actions."}):e.jsx("div",{className:p.actionsHorizontalList,children:t.map((o,r)=>{const i=kt(o),x=u=>{(u.key==="Enter"||u.key===" ")&&n(r)},l=Ut(o.type),d=Kt(o.type);return e.jsxs("div",{className:l,onClick:()=>n(r),onKeyDown:x,role:"button",tabIndex:0,children:[e.jsxs("div",{className:p.actionCardContent,children:[e.jsxs("div",{className:d,children:[o.type==="sendMsg"&&e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M22 2L11 13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),o.type==="setCode"&&e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M16 18L22 12L16 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 6L2 12L8 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),o.type==="reserve"&&e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 1V23",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6313 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3687 16.9749 13.0251C17.6313 13.6815 18 14.5717 18 15.5C18 16.4283 17.6313 17.3185 16.9749 17.9749C16.3185 18.6313 15.4283 19 14.5 19H6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),e.jsx("div",{className:p.actionCardTitle,children:i.title}),e.jsx("div",{className:p.actionCardDescription,children:i.description}),i.value&&e.jsx("div",{className:p.actionCardValue,children:i.value})]}),e.jsx("div",{className:p.actionCardView,children:e.jsxs("button",{className:p.viewActionBtn,children:["View Details",e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M15 12L9 8V16L15 12Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]},r)})}),Zt="_modalOverlay_1bphz_1",Yt="_modalContent_1bphz_15",ie={modalOverlay:Zt,modalContent:Yt},Xt=({open:t,onClose:n,children:o,contentClassName:r})=>{if(h.useEffect(()=>{const l=d=>{d.key==="Escape"&&n()};return t&&document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}},[t,n]),!t)return null;const i=l=>{(l.key==="Enter"||l.key===" ")&&n()},x=`${ie.modalContent} ${r||""}`.trim();return e.jsx("div",{className:ie.modalOverlay,onClick:n,onKeyDown:i,role:"button",tabIndex:0,"aria-label":"Close modal",children:e.jsx("div",{className:x,onClick:l=>l.stopPropagation(),children:o})})},Qt="_actionModalHeader_ewm9s_1",ea="_actionHeaderSendMsg_ewm9s_10 _actionModalHeader_ewm9s_1",ta="_actionHeaderSetCode_ewm9s_16 _actionModalHeader_ewm9s_1",aa="_actionHeaderReserve_ewm9s_22 _actionModalHeader_ewm9s_1",sa="_modalTitleContent_ewm9s_34",na="_modalTitleMain_ewm9s_39",oa="_modalTitleSub_ewm9s_45",ia="_actionModalHeaderIcon_ewm9s_60",la="_actionModalHeaderIconContainerSendMsg_ewm9s_81 _actionModalHeaderIconContainerBase_ewm9s_64",ra="_actionModalHeaderIconContainerSetCode_ewm9s_86 _actionModalHeaderIconContainerBase_ewm9s_64",ca="_actionModalHeaderIconContainerReserve_ewm9s_91 _actionModalHeaderIconContainerBase_ewm9s_64",da="_actionModalHeaderIconContainerChangeLibrary_ewm9s_96 _actionModalHeaderIconContainerBase_ewm9s_64",ua="_actionModalClose_ewm9s_106",ma="_actionModalBody_ewm9s_129",ha="_actionItemCard_ewm9s_135",xa="_actionDetailsContent_ewm9s_142",_a="_actionDetailSection_ewm9s_144",pa="_detailRow_ewm9s_174",Ca="_detailLabel_ewm9s_184",ja="_detailValue_ewm9s_198",va="_actionModalFullScreenContent_ewm9s_264",a={actionModalHeader:Qt,actionHeaderSendMsg:ea,actionHeaderSetCode:ta,actionHeaderReserve:aa,modalTitleContent:sa,modalTitleMain:na,modalTitleSub:oa,actionModalHeaderIcon:ia,actionModalHeaderIconContainerSendMsg:la,actionModalHeaderIconContainerSetCode:ra,actionModalHeaderIconContainerReserve:ca,actionModalHeaderIconContainerChangeLibrary:da,actionModalClose:ua,actionModalBody:ma,actionItemCard:ha,actionDetailsContent:xa,actionDetailSection:_a,detailRow:pa,detailLabel:Ca,detailValue:ja,actionModalFullScreenContent:va},ya=(t,n)=>{if(!t)return null;const o=t.src??n;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Type:"}),e.jsx("div",{className:a.detailValue,children:t.type})]}),t.type==="internal"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Source:"}),e.jsx("div",{className:a.detailValue,children:o?e.jsx(R,{address:D(o)}):"unknown"})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Destination:"}),e.jsx("div",{className:a.detailValue,children:e.jsx(R,{address:D(t.dest)})})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Value:"}),e.jsx("div",{className:a.detailValue,children:y(t.value.coins)})]}),t.value.other&&Object.keys(t.value.other).length>0&&e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Other Currencies:"}),e.jsx("div",{className:a.detailValue,children:e.jsx("pre",{children:JSON.stringify(t.value.other,null,2)})})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Forward Fee:"}),e.jsx("div",{className:a.detailValue,children:y(t.forwardFee)})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"IHR Fee:"}),e.jsx("div",{className:a.detailValue,children:y(t.ihrFee)})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Bounce:"}),e.jsx("div",{className:a.detailValue,children:U(t.bounce)})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Bounced:"}),e.jsx("div",{className:a.detailValue,children:U(t.bounced)})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"IHR Disabled:"}),e.jsx("div",{className:a.detailValue,children:U(t.ihrDisabled)})]})]}),t.type==="external-out"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Source:"}),e.jsx("div",{className:a.detailValue,children:o?e.jsx(R,{address:D(o)}):"unknown"})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Destination:"}),e.jsx("div",{className:a.detailValue,children:t.dest?e.jsx(R,{address:D(t.dest)}):"unknown"})]})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Created LT:"}),e.jsx("div",{className:a.detailValue,children:V(t.createdLt)})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Created At:"}),e.jsx("div",{className:a.detailValue,children:t.createdAt})]})]})},Na=t=>t?e.jsxs("div",{className:a.actionDetailSection,children:[e.jsx("h4",{children:"State Init"}),t.code&&e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Code Hash:"}),e.jsx("div",{className:a.detailValue,children:t.code.hash().toString("hex")})]}),t.data&&e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Data Hash:"}),e.jsx("div",{className:a.detailValue,children:t.data.hash().toString("hex")})]}),t.splitDepth!==void 0&&e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Split Depth:"}),e.jsx("div",{className:a.detailValue,children:V(t.splitDepth)})]})]}):e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"State Init:"}),e.jsx("div",{className:a.detailValue,children:"Not present"})]}),ga=(t,n)=>{switch(t.type){case"sendMsg":return e.jsxs("div",{className:a.actionDetailsContent,children:[e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Mode:"}),e.jsx("div",{className:a.detailValue,children:V(t.mode)})]}),e.jsx("h4",{children:"Message Info:"}),ya(t.outMsg.info,n),e.jsx("h4",{children:"Message Body:"}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"BoC:"}),e.jsx("div",{className:a.detailValue,children:e.jsx("pre",{children:t.outMsg.body.toBoc().toString("hex")})})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Cell:"}),e.jsx("div",{className:a.detailValue,children:e.jsx("pre",{children:t.outMsg.body.toString()})})]}),Na(t.outMsg.init)]});case"setCode":return e.jsxs("div",{className:a.actionDetailsContent,children:[e.jsx("h3",{children:"Set Code Details"}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"New Code:"}),e.jsx("div",{className:a.detailValue,children:t.newCode.toString()})]})]});case"reserve":return e.jsxs("div",{className:a.actionDetailsContent,children:[e.jsx("h3",{children:"Reserve Currency Details"}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Mode:"}),e.jsx("div",{className:a.detailValue,children:V(t.mode)})]}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"TON Coins:"}),e.jsx("div",{className:a.detailValue,children:y(t.currency.coins)})]}),t.currency.other&&Object.keys(t.currency.other).length>0&&e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Other Currencies:"}),e.jsx("div",{className:a.detailValue,children:e.jsx("pre",{children:JSON.stringify(t.currency.other,null,2)})})]})]});case"changeLibrary":return e.jsxs("div",{className:a.actionDetailsContent,children:[e.jsx("h3",{children:"Change Library Details"}),e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Mode:"}),e.jsx("div",{className:a.detailValue,children:V(t.mode)})]}),t.libRef.type==="hash"&&e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Library Hash:"}),e.jsx("div",{className:a.detailValue,children:t.libRef.libHash.toString("hex")})]}),t.libRef.type==="ref"&&e.jsxs("div",{className:a.detailRow,children:[e.jsx("div",{className:a.detailLabel,children:"Library Cell Hash:"}),e.jsx("div",{className:a.detailValue,children:t.libRef.library.hash().toString("hex")})]})]});default:return e.jsx("pre",{children:"Unknown action type"})}};function wa(t){switch(t.type){case"sendMsg":return{actionTitle:"Send Message",headerStyle:a.actionHeaderSendMsg,iconContainerClass:a.actionModalHeaderIconContainerSendMsg,headerIconSvg:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M22 2L11 13M22 2L15 22L11 13L2 9L22 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})};case"setCode":return{actionTitle:"Set Code",headerStyle:a.actionHeaderSetCode,iconContainerClass:a.actionModalHeaderIconContainerSetCode,headerIconSvg:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M16 18L22 12L16 6M8 6L2 12L8 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})};case"reserve":return{actionTitle:"Reserve Currency",headerStyle:a.actionHeaderReserve,iconContainerClass:a.actionModalHeaderIconContainerReserve,headerIconSvg:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 1V23M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6313 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3687 16.9749 13.0251C17.6313 13.6815 18 14.5717 18 15.5C18 16.4283 17.6313 17.3185 16.9749 17.9749C16.3185 18.6313 15.4283 19 14.5 19H6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})};case"changeLibrary":return{actionTitle:"Change Library",headerStyle:a.actionModalHeader,iconContainerClass:a.actionModalHeaderIconContainerChangeLibrary,headerIconSvg:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M4 19V5C4 3.89543 4.89543 3 6 3H18C19.1046 3 20 3.89543 20 5V19L12 14L4 19Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 7H16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}}}const fa=({action:t,index:n,contractAddress:o,onClose:r})=>{if(!t)return null;const{actionTitle:i,headerStyle:x,iconContainerClass:l,headerIconSvg:d}=wa(t);return e.jsxs(Xt,{open:!!t,onClose:r,contentClassName:a.actionModalFullScreenContent,children:[e.jsxs("div",{className:`${a.actionModalHeader} ${x}`,children:[e.jsxs("div",{className:a.modalTitleContent,children:[e.jsxs("h3",{className:a.modalTitleMain,children:[e.jsx("span",{className:`${l} ${a.actionModalHeaderIcon}`,children:d}),i]}),e.jsxs("span",{className:a.modalTitleSub,children:["Action #",n+1]})]}),e.jsx("button",{type:"button",onClick:r,className:a.actionModalClose,"aria-label":"Close modal",children:e.jsx(Fe,{svg:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})})]}),e.jsx("div",{className:a.actionModalBody,children:e.jsx("div",{className:a.actionItemCard,children:ga(t,o)})})]})},ba=({result:t})=>{const[n,o]=h.useState(null),r=l=>o(l),i=()=>o(null),x=n!==null?t.result.emulatedTx.actions[n]:null;return e.jsxs("div",{className:"retrace-result-container",children:[e.jsx(St,{result:t.result}),e.jsxs("div",{className:"actions-section",children:[e.jsxs("h3",{className:"actions-heading",children:["Out Actions (",t.result.emulatedTx.actions.length,")"]}),e.jsx(Jt,{actions:t.result.emulatedTx.actions,onSelect:r})]}),e.jsx(fa,{action:x,index:n??0,contractAddress:t.result.inMsg.contract,onClose:i}),t.result.emulatedTx.vmLogs&&e.jsx(le,{title:"VM Logs",logs:t.result.emulatedTx.vmLogs,isExpandable:!0,defaultExpanded:!1}),t.result.emulatedTx.executorLogs&&e.jsx(le,{title:"Executor Logs",logs:t.result.emulatedTx.executorLogs,isExpandable:!0,defaultExpanded:!1})]})},he=z.memo(ba);he.displayName="RetraceResultView";const Ia="_logsContainer_12jnc_1",Sa="_expandableContainer_12jnc_8",ka="_expandableHeader_12jnc_15",La="_logsHeading_12jnc_39",Ta="_logsContent_12jnc_47",Va="_logsContentInner_12jnc_53",Ma="_vmLogs_12jnc_57",Ra="_copyButton_12jnc_69",L={logsContainer:Ia,expandableContainer:Sa,expandableHeader:ka,logsHeading:La,logsContent:Ta,logsContentInner:Va,vmLogs:Ma,copyButton:Ra},le=({logs:t,title:n="Logs",isExpandable:o=!1,defaultExpanded:r=!1})=>{const[i,x]=h.useState(r),[l,d]=h.useState("idle");if(!t)return null;const u=()=>{o&&x(!i)},f=j=>{o&&(j.key==="Enter"||j.key===" ")&&u()},N=async()=>{if(t)try{await navigator.clipboard.writeText(t),d("copied"),setTimeout(()=>d("idle"),1500)}catch(j){console.error("Failed to copy logs:",j)}},g=()=>e.jsxs("div",{className:L.logsContentInner,children:[e.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>{N()},className:L.copyButton,"aria-label":l==="idle"?"Copy logs":"Logs copied",children:l==="idle"?e.jsx(de,{}):e.jsx(ue,{})}),e.jsx("pre",{className:L.vmLogs,children:t})]});return o?e.jsxs("div",{className:L.expandableContainer,children:[e.jsxs("div",{className:L.expandableHeader,onClick:u,onKeyDown:f,role:"button",tabIndex:0,"aria-expanded":i,children:[i?e.jsx(Ae,{}):e.jsx(We,{}),e.jsx("h3",{className:L.logsHeading,children:n})]}),i&&e.jsx("div",{className:L.logsContent,children:g()})]}):e.jsxs("div",{className:L.logsContainer,children:[n&&e.jsx("h3",{className:L.logsHeading,children:n}),g()]})},$a="_inputWrapper_1qq5f_1",Ha="_focused_1qq5f_14",Ba="_searchIcon_1qq5f_19",Da="_txInput_1qq5f_32",Ea="_submitButton_1qq5f_45",Fa="_compactWrapper_1qq5f_55",Aa="_compactSearchIcon_1qq5f_60",Wa="_compactInput_1qq5f_69",Pa="_compactButton_1qq5f_74",T={inputWrapper:$a,focused:Ha,searchIcon:Ba,txInput:Da,submitButton:Ea,compactWrapper:Fa,compactSearchIcon:Aa,compactInput:Wa,compactButton:Pa},re=({value:t,onChange:n,onSubmit:o,onFocus:r,onBlur:i,placeholder:x,loading:l,autoFocus:d=!1,compact:u=!1,onInputClick:f})=>{const[N,g]=h.useState(!1),j=M=>{M.key==="Enter"&&o()},$=`${T.inputWrapper} ${N?T.focused:""} ${u?T.compactWrapper:""}`,C=`${T.txInput} ${u?T.compactInput:""}`,S=`${T.submitButton} ${u?T.compactButton:""}`;return e.jsxs("div",{className:$,role:"search",children:[e.jsx("div",{className:`${T.searchIcon} ${u?T.compactSearchIcon:""}`,"aria-hidden":"true",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[e.jsx("path",{d:"M11 19C15.4183 19 19 15.4183 19 11C19 6.58172 15.4183 3 11 3C6.58172 3 3 6.58172 3 11C3 15.4183 6.58172 19 11 19Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M21 21L16.65 16.65",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("input",{type:"text",spellCheck:"false",autoFocus:d,placeholder:x,value:t,onChange:M=>n(M.target.value),onKeyDown:j,onFocus:()=>{r?.(),g(!0)},onBlur:()=>{i?.(),g(!1)},onClick:f,className:C,"aria-label":x??"Search transaction","aria-describedby":u?void 0:"search-instructions"}),e.jsx(Y,{variant:"primary",size:u?"sm":"md",className:S,onClick:o,disabled:l,"aria-label":l?"Tracing transaction...":"Trace transaction",title:l?"Tracing...":"Trace transaction (Enter)",children:"Trace"}),!u&&e.jsx("div",{id:"search-instructions",className:"sr-only",children:"Press Enter or click Trace button to search. Use Ctrl+Enter or Cmd+Enter as shortcut."})]})},J="TxTracerHistoryV1",Oa=5;function qa(){const[t,n]=h.useState([]);h.useEffect(()=>{try{const i=localStorage.getItem(J);i&&n(JSON.parse(i))}catch(i){console.error("Failed to load transaction history from localStorage",i),n([])}},[]);const o=h.useCallback(i=>{!i.hash||i.hash.trim()===""||n(x=>{const l=x.filter(u=>u.hash!==i.hash);l.unshift(i);const d=l.slice(0,Oa);try{localStorage.setItem(J,JSON.stringify(d))}catch(u){console.error("Failed to save transaction history to localStorage",u)}return d})},[]),r=h.useCallback(i=>{n(x=>{const l=x.filter(d=>d.hash!==i);try{localStorage.setItem(J,JSON.stringify(l))}catch(d){console.error("Failed to save updated transaction history to localStorage",d)}return l})},[]);return{history:t,addToHistory:o,removeFromHistory:r}}const za="_tooltipContainer_1tlpf_1",Ga="_iconWrapper_1tlpf_7",Ka="_tooltipBase_1tlpf_21",Ua="_tooltip_1tlpf_1 _tooltipBase_1tlpf_21",O={tooltipContainer:za,iconWrapper:Ga,tooltipBase:Ka,tooltip:Ua,"tooltip-right":"_tooltip-right_1tlpf_55","tooltip-bottom":"_tooltip-bottom_1tlpf_79"},Ja=({children:t,tooltipText:n,iconSize:o=16,placement:r="right"})=>{const i=`${O.tooltip} ${O[`tooltip-${r}`]}`;return e.jsxs("span",{className:O.tooltipContainer,children:[t,e.jsxs("span",{className:O.iconWrapper,role:"button",tabIndex:0,children:[e.jsx(Pe,{size:o,"aria-hidden":"true"}),e.jsx("span",{className:i,role:"tooltip",children:n})]})]})},Za="_stackItemViewer_a4fe2_1",Ya={stackItemViewer:Za},Xa="_cellNode_b2kls_1",Qa="_cellNodeColor1_b2kls_11",es="_cellNodeColor2_b2kls_18",ts="_cellNodeColor3_b2kls_25",as="_cellNodeColor4_b2kls_32",ss="_cellNodeColor5_b2kls_39",ns="_cellInfo_b2kls_46",os="_cellTextContent_b2kls_57",is="_cellInfoClickable_b2kls_67",ls="_cellRefs_b2kls_71",rs="_refsToggle_b2kls_77",cs="_copyButton_b2kls_83",ds="_copied_b2kls_106",I={cellNode:Xa,cellNodeColor1:Qa,cellNodeColor2:es,cellNodeColor3:ts,cellNodeColor4:as,cellNodeColor5:ss,cellInfo:ns,cellTextContent:os,cellInfoClickable:is,cellRefs:ls,refsToggle:rs,copyButton:cs,copied:ds},us=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),ms=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),xe=(t,n=[])=>{n.push(t.bits.length);for(const o of t.refs)xe(o,n);return n},hs=(t,n)=>{if(n===0)return 200;const r=t/n*400;return Math.max(r,60)},Z=({cell:t,depth:n=0,maxBitsLength:o})=>{const[r,i]=h.useState(!0),[x,l]=h.useState(!1),d=h.useMemo(()=>{if(o!==void 0)return o;if(n===0){const C=xe(t);return Math.max(...C)}return 0},[t,n,o]),u=t.refs.length,f=hs(t.bits.length,d);if(n>10)return e.jsx("div",{className:I.cellNode,style:{marginLeft:10},children:"Max depth reached."});const N=C=>{C.stopPropagation(),u>0&&i(!r)},g=C=>{C.stopPropagation();const S=t.toBoc().toString("hex");navigator.clipboard.writeText(S).then(()=>{l(!0),setTimeout(()=>l(!1),1500)}).catch(M=>{console.error("Failed to copy BoC: ",M),setTimeout(()=>l(!1),1500)})},j=`${I.cellInfo} ${u>0?I.cellInfoClickable:""}`,$=I[`cellNodeColor${n%5+1}`];return e.jsxs("div",{className:`${I.cellNode}`,style:{marginLeft:n*5},children:[e.jsxs("div",{className:`${j} ${$}`,style:{width:f},onClick:u>0?N:void 0,onKeyDown:u>0?C=>{(C.key==="Enter"||C.key===" ")&&N(C)}:void 0,role:u>0?"button":void 0,tabIndex:u>0?0:void 0,children:[e.jsxs("div",{className:I.cellTextContent,children:[e.jsx("strong",{children:"Bits:"})," ",t.bits.length,e.jsx("br",{}),e.jsx("strong",{children:"Refs:"})," ",u>0?e.jsxs("span",{className:I.refsToggle,children:[r?"▾":"▸"," ",u]}):u]}),e.jsx("button",{className:`${I.copyButton} ${x?I.copied:""}`,onClick:g,title:"Copy BoC (Hex)",children:x?e.jsx(ms,{}):e.jsx(us,{})})]}),r&&u>0&&e.jsx("div",{className:I.cellRefs,children:t.refs.map((C,S)=>e.jsx(Z,{cell:C,depth:n+1,maxBitsLength:d},`${t.hash().toString("hex")}-ref-${S}`))})]})},xs="_container_1n3df_1",_s="_label_1n3df_5",ps="_contentWrapper_1n3df_12",Cs="_copyButton_1n3df_19",js="_content_1n3df_12",A={container:xs,label:_s,contentWrapper:ps,copyButton:Cs,content:js},ce=({data:t,label:n,maxHeight:o=100})=>{const[r,i]=h.useState("idle"),x=async()=>{try{await navigator.clipboard.writeText(t),i("copied"),setTimeout(()=>i("idle"),1500)}catch(l){console.error("Failed to copy data:",l)}};return e.jsxs("div",{className:A.container,children:[n&&e.jsx("div",{className:A.label,children:n}),e.jsxs("div",{className:A.contentWrapper,children:[e.jsx("pre",{className:A.content,style:{maxHeight:`${o}px`},children:t}),e.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>{x()},className:A.copyButton,"aria-label":r==="idle"?"Copy":"Copied",children:r==="idle"?e.jsx(de,{}):e.jsx(ue,{})})]})]})},vs="_addressSection_gk4wi_1",ys="_addressRow_gk4wi_8",Ns="_addressLabel_gk4wi_14",gs="_addressValue_gk4wi_21",B={addressSection:vs,addressRow:ys,addressLabel:Ns,addressValue:gs},ws=({address:t})=>{const n=t.toRawString(),o=t.toString();return e.jsxs("div",{className:B.addressSection,children:[e.jsxs("div",{className:B.addressRow,children:[e.jsx("div",{className:B.addressLabel,children:"Raw Address:"}),e.jsx("div",{className:B.addressValue,children:e.jsx(R,{address:n})})]}),e.jsxs("div",{className:B.addressRow,children:[e.jsx("div",{className:B.addressLabel,children:"Friendly Address:"}),e.jsx("div",{className:B.addressValue,children:e.jsx(R,{address:o})})]})]})},fs="_detailsContainer_fkrej_1",bs="_header_fkrej_12",Is="_title_fkrej_20",Ss="_closeButton_fkrej_27",ks="_contentContainer_fkrej_47",Ls="_treeRow_fkrej_56",Ts="_detailsRow_fkrej_63",Vs="_treeViewContainer_fkrej_69",Ms="_dataSection_fkrej_80",w={detailsContainer:fs,header:bs,title:Is,closeButton:Ss,contentContainer:ks,treeRow:Ls,detailsRow:Ts,treeViewContainer:Vs,dataSection:Ms},Rs=({itemData:t,title:n,onClose:o})=>{if(!t)return e.jsx("div",{className:w.detailsContainer,children:e.jsx("p",{children:"No item selected"})});let r=null,i=null;const x=d=>d.$==="Cell"&&d?.boc?te.Cell.fromHex(d.boc):(d.$==="Slice"||d.$==="Builder")&&d?.hex?te.Cell.fromHex(d.hex):null,l=d=>{try{return d.asSlice().loadAddress()}catch{return}};try{const d=x(t);if(d)if(d.bits.length===267&&d.refs.length===0){const u=l(d);u?(r=e.jsx(ws,{address:u}),i=null):(r=e.jsx(e.Fragment,{children:e.jsx("div",{className:w.dataSection,children:e.jsx(ce,{label:"",data:d.toBoc().toString("hex")})})}),i=e.jsx(Z,{cell:d}))}else r=e.jsx(e.Fragment,{children:e.jsx("div",{className:w.dataSection,children:e.jsx(ce,{label:"",data:d.toBoc().toString("hex")})})}),i=e.jsx(Z,{cell:d});else i=null,r=e.jsx("p",{children:"Details for the selected item will be shown here."})}catch(d){console.error("Error processing item data:",d),i=null,r=e.jsx("p",{children:"Error displaying item details. Data might be malformed."})}return e.jsxs("div",{className:w.detailsContainer,children:[(n||o)&&e.jsxs("div",{className:w.header,children:[n&&e.jsx("h3",{className:w.title,children:n}),o&&e.jsx("button",{onClick:o,className:w.closeButton,"aria-label":"Close details",children:"×"})]}),e.jsxs("div",{className:w.contentContainer,children:[e.jsx("div",{className:w.detailsRow,children:r}),i&&e.jsx("div",{className:w.treeRow,children:e.jsx("div",{className:w.treeViewContainer,children:i})})]})]})},$s=({element:t,title:n,onBack:o})=>e.jsx("div",{className:Ya.stackItemViewer,children:e.jsx(Rs,{itemData:t,title:n,onClose:o})}),Hs="_traceViewWrapper_ptmyo_1",Bs="_loadingOverlay_ptmyo_9",Ds="_appContainer_ptmyo_23",Es="_headerContent_ptmyo_36",Fs="_searchInputContainer_ptmyo_41",As="_txStatusContainer_ptmyo_46",Ws="_mainContent_ptmyo_56",Ps="_mainContentMinimized_ptmyo_69",Os="_detailsSection_ptmyo_72",qs="_detailsSectionExpanded_ptmyo_80",zs="_detailsHeader_ptmyo_88",Gs="_detailsTitle_ptmyo_103",Ks="_detailsContent_ptmyo_128",Us="_transactionDetailsPanelInTracePage_ptmyo_136",Js="_inputPage_ptmyo_141",Zs="_centeredInputContainer_ptmyo_149",Ys="_txtracerLogo_ptmyo_158",Xs="_logoDiamond_ptmyo_165",Qs="_txtracerLogoH1_ptmyo_194",en="_titleTon_ptmyo_203",tn="_inputCard_ptmyo_213",an="_historyDropdown_ptmyo_219",sn="_historyItem_ptmyo_240",nn="_historyItemIcon_ptmyo_260",on="_historyItemText_ptmyo_266",ln="_historyItemDeleteButton_ptmyo_273",rn="_featureCards_ptmyo_291",cn="_featureCard_ptmyo_291",dn="_featureCardIcon_ptmyo_325",un="_playgroundIcon_ptmyo_337",mn="_explorerIcon_ptmyo_342",hn="_featureCardTitle_ptmyo_347",xn="_featureCardDescription_ptmyo_353",_n="_featureCardBadge_ptmyo_360",pn="_createBy_ptmyo_373",Cn="_externalLinksContainer_ptmyo_398",jn="_iconLink_ptmyo_406",vn="_stackItemOverlay_ptmyo_587",yn="_codeEditorHidden_ptmyo_597",Nn="_codeEditorArea_ptmyo_626",gn="_codeEditorWrapper_ptmyo_650",wn="_sidebarArea_ptmyo_661",c={traceViewWrapper:Hs,loadingOverlay:Bs,appContainer:Ds,headerContent:Es,searchInputContainer:Fs,txStatusContainer:As,mainContent:Ws,mainContentMinimized:Ps,detailsSection:Os,detailsSectionExpanded:qs,detailsHeader:zs,detailsTitle:Gs,detailsContent:Ks,transactionDetailsPanelInTracePage:Us,inputPage:Js,centeredInputContainer:Zs,txtracerLogo:Ys,logoDiamond:Xs,txtracerLogoH1:Qs,titleTon:en,inputCard:tn,historyDropdown:an,historyItem:sn,historyItemIcon:nn,historyItemText:on,historyItemDeleteButton:ln,featureCards:rn,featureCard:cn,featureCardIcon:dn,playgroundIcon:un,explorerIcon:mn,featureCardTitle:hn,featureCardDescription:xn,featureCardBadge:_n,createBy:pn,externalLinksContainer:Cn,iconLink:jn,stackItemOverlay:vn,codeEditorHidden:yn,codeEditorArea:Nn,codeEditorWrapper:gn,sidebarArea:wn},fn=z.lazy(()=>me(()=>import("./index-DwyrphCf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),bn=z.lazy(()=>me(()=>import("./index-DjWaDtFX.js"),__vite__mapDeps([9,1,2,3,10]),import.meta.url));function In(){const[t,n]=h.useState(""),[o,r]=h.useState(""),[i,x]=h.useState(void 0),[l,d]=h.useState(!1),[u,f]=h.useState(!1),{setError:N}=Oe(),[g,j]=h.useState([]),[$,C]=h.useState(0),{history:S,addToHistory:M,removeFromHistory:_e}=qa(),[pe,E]=h.useState(!1),[Ce,X]=h.useState(!1),[b,F]=h.useState(null),je=tt(i?.trace),{selectedStep:W,highlightLine:ve,currentStep:ye,currentStack:Ne,handlePrev:ge,handleNext:we,goToFirstStep:fe,goToLastStep:be,canGoPrev:Ie,canGoNext:Se,findStepByLine:ke,transitionType:Le,totalSteps:Te}=at(i?.trace);h.useEffect(()=>{const _=new URLSearchParams(window.location.search).get("tx")??"";n(_),r(_)},[]),h.useEffect(()=>{i?.trace?j(i.trace.steps.map(m=>({name:m.instructionName,gasCost:ae(m)}))):j([])},[i]),h.useEffect(()=>{if(i?.trace?.steps&&W>0){let m=0;for(let _=0;_<W;_++){const v=i.trace.steps[_];if(v){const k=ae(v);isNaN(k)||(m+=k)}}C(m)}else C(0)},[W,i?.trace?.steps]);const H=h.useCallback(async(m=!1,_)=>{const v=_??(m?o:t);if(v.trim()){d(!0);try{const k=await st(v);if(x(k),F(null),!m){const ee=k?.result?.emulatedTx?.computeInfo,Ee=ee!=="skipped"?ee?.exitCode:void 0;M({hash:v,exitCode:Ee})}E(!1),window.history.pushState({},"",`?tx=${v}`)}catch(k){console.error(k),k instanceof Error?N(`Failed to trace transaction: ${k.message}`):N("Failed to trace transaction")}finally{d(!1)}}},[o,t,N,M]),Ve=h.useCallback(()=>{H(!0)},[H]);h.useEffect(()=>{const m=_=>{(_.ctrlKey||_.metaKey)&&_.key==="Enter"?(_.preventDefault(),l||H(!1)):_.key==="Escape"&&b&&(_.preventDefault(),F(null))};return document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}},[H,l,b]);const G=h.useCallback(()=>f(m=>!m),[]),Me=h.useCallback(m=>{(m.key==="Enter"||m.key===" ")&&G()},[G]),Re=h.useCallback((m,_)=>{b&&b.element===m&&b.title===_?F(null):F({element:m,title:_})},[b]),$e=h.useCallback(()=>{F(null)},[]),He=i?.result?.emulatedTx?.computeInfo!=="skipped"?i?.result?.emulatedTx?.computeInfo?.exitCode:void 0,K=i?.result?.emulatedTx?.computeInfo!=="skipped"?i?.result?.emulatedTx?.computeInfo?.success?"success":"failed":"success",Q=i?.result?.stateUpdateHashOk,Be=K!==void 0||Q===!1,De=`Exit code: ${He?.toString()??"unknown"}`;return e.jsxs(e.Fragment,{children:[!i&&e.jsxs("main",{className:c.inputPage,children:[e.jsxs("div",{id:"trace-status",className:"sr-only","aria-live":"polite","aria-atomic":"true",children:[l&&"Tracing transaction...",i&&!l&&"Transaction traced successfully"]}),e.jsx("div",{className:"sr-only",children:"Press Ctrl+Enter or Cmd+Enter to trace the transaction"}),e.jsx("div",{className:c.externalLinksContainer,children:e.jsx("a",{href:"https://github.com/tact-lang/txtracer",target:"_blank",rel:"noopener noreferrer",title:"GitHub Repository",className:c.iconLink,"aria-label":"View TxTracer source code on GitHub",children:e.jsx(qe,{size:24,"aria-hidden":"true"})})}),e.jsxs("div",{className:c.centeredInputContainer,children:[e.jsxs("header",{className:c.txtracerLogo,children:[e.jsx("div",{className:c.logoDiamond,"aria-hidden":"true"}),e.jsxs("h1",{"data-testid":"app-title",className:c.txtracerLogoH1,children:[e.jsx("span",{children:"TxTracer"}),e.jsx("span",{className:c.titleTon,children:"The Open Network"})]})]}),e.jsxs("section",{"aria-labelledby":"search-heading",className:c.inputCard,children:[e.jsx("h2",{id:"search-heading",className:"sr-only",children:"Transaction Search"}),e.jsx(re,{value:t,onChange:n,onSubmit:()=>{H(!1)},placeholder:"Search by transaction hash or explorer link",loading:l,autoFocus:!0,onFocus:()=>{X(!0)},onBlur:()=>{X(!1),setTimeout(()=>E(!1),100)},onInputClick:()=>{Ce&&E(!0)}}),pe&&S.length>0&&e.jsx("ul",{className:c.historyDropdown,onMouseDown:m=>m.preventDefault(),role:"listbox","aria-label":"Transaction history",children:S.slice(0,Math.min(4,S.length)).map(m=>{const _=m.exitCode===void 0||m.exitCode===0?"success":"failed";return e.jsxs("li",{onClick:()=>{n(m.hash),E(!1),H(!1,m.hash)},onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),n(m.hash),E(!1),H(!1,m.hash))},className:c.historyItem,role:"option",tabIndex:0,"aria-selected":!1,children:[e.jsx(ze,{size:16,className:c.historyItemIcon,"aria-hidden":"true"}),e.jsx("span",{className:c.historyItemText,children:se(m.hash,16,16)}),m.exitCode!==void 0&&e.jsx(q,{type:_,text:`Exit code: ${m.exitCode}`}),e.jsx("button",{className:c.historyItemDeleteButton,onClick:v=>{v.stopPropagation(),_e(m.hash)},title:"Remove from history","aria-label":`Remove transaction ${se(m.hash,8,8)} from history`,children:e.jsx(Ge,{size:16,"aria-hidden":"true"})})]},m.hash)})})]}),l?e.jsx(P,{message:"Tracing transaction",subtext:"This may take a few moments",loading:l}):e.jsxs("section",{"aria-labelledby":"features-heading",className:c.featureCards,children:[e.jsx("h2",{id:"features-heading",className:"sr-only",children:"Available Tools"}),e.jsxs("a",{href:"/play/",className:c.featureCard,children:[e.jsx("div",{className:`${c.featureCardIcon} ${c.playgroundIcon}`,children:e.jsx(Ke,{"aria-hidden":"true"})}),e.jsx("h3",{className:c.featureCardTitle,children:"Assembly Playground"}),e.jsx("p",{className:c.featureCardDescription,children:"Experiment with TVM assembly code directly in your browser. Write, test, and debug assembly instructions with real-time execution."}),e.jsx("span",{className:c.featureCardBadge,children:"Playground"})]}),e.jsxs("a",{href:"/code-explorer/",className:c.featureCard,children:[e.jsx("div",{className:`${c.featureCardIcon} ${c.explorerIcon}`,children:e.jsx(Ue,{"aria-hidden":"true"})}),e.jsx("h3",{className:c.featureCardTitle,children:"Code Explorer"}),e.jsx("p",{className:c.featureCardDescription,children:"Compile FunC code to assembly and explore the generated bytecode. Perfect for understanding how your smart contracts work under the hood."}),e.jsx("span",{className:c.featureCardBadge,children:"Explorer"})]})]})]}),e.jsxs("footer",{className:c.createBy,children:["Created by"," ",e.jsx("a",{href:"https://tonstudio.io",target:"_blank",rel:"noreferrer",children:"TON Studio"})]})]}),l&&!i&&e.jsx("main",{className:c.inputPage,children:e.jsx(P,{message:"Tracing transaction",subtext:"This may take a few moments",loading:!0})}),i&&e.jsxs("div",{className:c.traceViewWrapper,children:[e.jsxs("div",{id:"trace-results-status",className:"sr-only","aria-live":"polite","aria-atomic":"true",children:[l&&"Loading new transaction trace...",i&&!l&&"Transaction trace loaded successfully"]}),e.jsx(bn,{pageTitle:"",network:i?.network??"mainnet",children:e.jsxs("div",{className:c.headerContent,children:[e.jsx("div",{className:c.searchInputContainer,role:"search","aria-label":"Search for another transaction",children:e.jsx(re,{value:o,onChange:r,onSubmit:Ve,placeholder:"Trace another transaction hash",loading:l,autoFocus:!1,compact:!0})}),Be&&e.jsxs("div",{className:c.txStatusContainer,role:"status","aria-live":"polite",children:[K&&e.jsx(q,{type:K,text:De}),Q===!1&&e.jsx(Ja,{tooltipText:"Because the transaction runs in a local sandbox, we can't always reproduce it exactly. Sandbox replay was incomplete, and some values may differ from those on the real blockchain.",placement:"bottom",children:e.jsx(q,{type:"warning",text:"Trace Incomplete"})})]})]})}),e.jsxs("main",{className:c.appContainer,children:[e.jsxs("div",{className:`${c.mainContent} ${u?c.mainContentMinimized:""}`,children:[e.jsxs("section",{"aria-labelledby":"code-viewer-heading","data-testid":"code-editor-container",className:c.codeEditorArea,children:[e.jsx("h2",{id:"code-viewer-heading",className:"sr-only",children:"Transaction Code Viewer"}),e.jsx("div",{className:`${c.codeEditorWrapper} ${b?c.codeEditorHidden:""}`,children:e.jsx(h.Suspense,{fallback:e.jsx(P,{message:"Loading Editor...",loading:!0}),children:e.jsx(fn,{code:i.code,highlightLine:ve,lineExecutionData:je,onLineClick:ke,shouldCenter:Le==="button",exitCode:i.exitCode})})}),b&&e.jsx("div",{className:c.stackItemOverlay,children:e.jsx($s,{element:b.element,title:b.title,onBack:$e})})]}),e.jsx(nt,{selectedStep:W,totalSteps:Te,currentStep:ye,currentStack:Ne,canGoPrev:Ie,canGoNext:Se,onPrev:ge,onNext:we,onFirst:fe,onLast:be,showGas:!0,placeholderMessage:"No trace steps available.",instructionDetails:g,cumulativeGas:$,onStackItemClick:Re,className:c.sidebarArea})]}),e.jsxs("section",{className:`${c.detailsSection} ${u?c.detailsSectionExpanded:""}`,"aria-labelledby":"transaction-details-heading",children:[e.jsx("div",{"data-testid":"details-header",className:c.detailsHeader,onClick:G,onKeyDown:Me,role:"button",tabIndex:0,"aria-expanded":u,"aria-controls":"transaction-details-content",children:e.jsx("div",{className:c.detailsTitle,children:e.jsx("span",{id:"transaction-details-heading",children:"TRANSACTION DETAILS"})})}),u&&e.jsx("div",{id:"transaction-details-content","data-testid":"details-content",className:c.detailsContent,children:e.jsx("div",{className:c.transactionDetailsPanelInTracePage,children:e.jsx(he,{result:i})})})]})]}),l&&i&&e.jsx("div",{className:c.loadingOverlay,role:"status","aria-live":"polite",children:e.jsx(P,{message:"Tracing new transaction...",subtext:"This may take a few moments",loading:!0})})]})]})}Je.createRoot(document.getElementById("root")).render(e.jsx(z.StrictMode,{children:e.jsx(Ze,{children:e.jsx(Ye,{children:e.jsx(Xe,{children:e.jsx(Qe,{loadingMessage:"Loading TxTracer...",children:e.jsx(In,{})})})})})}));
